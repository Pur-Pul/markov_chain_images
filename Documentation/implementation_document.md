The structure of the program is very simple as everything runs of the same python file. The program has three custom classes: Chain, Stack and Node. Stack and Node operate togheter to form a stack, which is in turn used by the Chain class for depth-first traversal. 

Python's Random class is used in the depth-first traversal for shuffling the order of neighbouring nodes as well as selecting colors based on probabilities.

PIL and os are used for managing image files.